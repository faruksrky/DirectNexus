import{u as E,r as C,p as z,j as i,aB as F,B as f,T as h,aA as R,V as T,n as S,o as k,y as _,z as V,aN as B,_ as G,E as L,F as W,au as I,A as M,aH as O,a5 as Z}from"./index-CdzOVLdX.js";import{z as e,i as q,u as N,t as w,J as A,a as D,F as s,j as Q,b as H,l as J,L as P,m as K,D as X,d as Y}from"./form-provider-zPFLGP4B.js";import{s as y,G as v,C as u}from"./new-password-icon-HYre8c-q.js";const $=e.object({avatarUrl:y.file({message:{required_error:"Avatar is required!"}}),name:e.string().min(1,{message:"Name is required!"}),email:e.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:y.phoneNumber({isValidPhoneNumber:q}),country:y.objectOrNull({message:{required_error:"Country is required!"}}),address:e.string().min(1,{message:"Address is required!"}),company:e.string().min(1,{message:"Company is required!"}),state:e.string().min(1,{message:"State is required!"}),city:e.string().min(1,{message:"City is required!"}),role:e.string().min(1,{message:"Role is required!"}),zipCode:e.string().min(1,{message:"Zip code is required!"}),status:e.string(),isVerified:e.boolean()});function ta({currentUser:a}){const l=E(),m=C.useMemo(()=>({status:(a==null?void 0:a.status)||"",avatarUrl:(a==null?void 0:a.avatarUrl)||null,isVerified:(a==null?void 0:a.isVerified)||!0,name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",country:(a==null?void 0:a.country)||"",state:(a==null?void 0:a.state)||"",city:(a==null?void 0:a.city)||"",address:(a==null?void 0:a.address)||"",zipCode:(a==null?void 0:a.zipCode)||"",company:(a==null?void 0:a.company)||"",role:(a==null?void 0:a.role)||""}),[a]),d=N({mode:"onSubmit",resolver:w($),defaultValues:m}),{reset:x,watch:n,control:g,handleSubmit:p,formState:{isSubmitting:b}}=d,o=n(),c=p(async t=>{try{await new Promise(j=>setTimeout(j,500)),x(),A.success(a?"Update success!":"Create success!"),l.push(z.dashboard.user.list),console.info("DATA",t)}catch(j){console.error(j)}});return i.jsx(D,{methods:d,onSubmit:c,children:i.jsxs(v,{container:!0,spacing:3,children:[i.jsx(v,{xs:12,md:4,children:i.jsxs(u,{sx:{pt:10,pb:5,px:3},children:[a&&i.jsx(F,{color:o.status==="active"&&"success"||o.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:o.status}),i.jsx(f,{sx:{mb:5},children:i.jsx(s.UploadAvatar,{name:"avatarUrl",maxSize:3145728,helperText:i.jsxs(h,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",i.jsx("br",{})," max size of ",Q(3145728)]})})}),a&&i.jsx(H,{labelPlacement:"start",control:i.jsx(J,{name:"status",control:g,render:({field:t})=>i.jsx(R,{...t,checked:t.value!=="active",onChange:j=>t.onChange(j.target.checked?"banned":"active")})}),label:i.jsxs(i.Fragment,{children:[i.jsx(h,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),i.jsx(h,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),i.jsx(s.Switch,{name:"isVerified",labelPlacement:"start",label:i.jsxs(i.Fragment,{children:[i.jsx(h,{variant:"subtitle2",sx:{mb:.5},children:"Email verified"}),i.jsx(h,{variant:"body2",sx:{color:"text.secondary"},children:"Disabling this will automatically send the user a verification email"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}}),a&&i.jsx(T,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:i.jsx(S,{variant:"soft",color:"error",children:"Delete user"})})]})}),i.jsx(v,{xs:12,md:8,children:i.jsxs(u,{sx:{p:3},children:[i.jsxs(f,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[i.jsx(s.Text,{name:"name",label:"Full name"}),i.jsx(s.Text,{name:"email",label:"Email address"}),i.jsx(s.Phone,{name:"phoneNumber",label:"Phone number"}),i.jsx(s.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),i.jsx(s.Text,{name:"state",label:"State/region"}),i.jsx(s.Text,{name:"city",label:"City"}),i.jsx(s.Text,{name:"address",label:"Address"}),i.jsx(s.Text,{name:"zipCode",label:"Zip/code"}),i.jsx(s.Text,{name:"company",label:"Company"}),i.jsx(s.Text,{name:"role",label:"Role"})]}),i.jsx(T,{alignItems:"flex-end",sx:{mt:3},children:i.jsx(P,{type:"submit",variant:"contained",loading:b,children:a?"Save changes":"Create user"})})]})})]})})}const r=["className","id"],U=a=>{const{classes:l}=a;return W({root:["root"]},K,l)},aa=k(h,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(a,l)=>l.root})({padding:"16px 24px",flex:"0 0 auto"}),ia=C.forwardRef(function(l,m){const d=_({props:l,name:"MuiDialogTitle"}),{className:x,id:n}=d,g=V(d,r),p=d,b=U(p),{titleId:o=n}=C.useContext(B);return i.jsx(aa,G({component:"h2",className:L(b.root,x),ownerState:p,ref:m,variant:"h6",id:n??o},g))}),sa=e.object({name:e.string().min(1,{message:"Name is required!"}),email:e.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:y.phoneNumber({isValidPhoneNumber:q}),country:y.objectOrNull({message:{required_error:"Country is required!"}}),state:e.string().min(1,{message:"State is required!"}),city:e.string().min(1,{message:"City is required!"}),address:e.string().min(1,{message:"Address is required!"}),zipCode:e.string().min(1,{message:"Zip code is required!"}),company:e.string().min(1,{message:"Company is required!"}),role:e.string().min(1,{message:"Role is required!"}),status:e.string()});function ma({currentUser:a,open:l,onClose:m}){const d=C.useMemo(()=>({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",address:(a==null?void 0:a.address)||"",country:(a==null?void 0:a.country)||"",state:(a==null?void 0:a.state)||"",city:(a==null?void 0:a.city)||"",zipCode:(a==null?void 0:a.zipCode)||"",status:a==null?void 0:a.status,company:(a==null?void 0:a.company)||"",role:(a==null?void 0:a.role)||""}),[a]),x=N({mode:"all",resolver:w(sa),defaultValues:d}),{reset:n,handleSubmit:g,formState:{isSubmitting:p}}=x,b=g(async o=>{const c=new Promise(t=>setTimeout(t,1e3));try{n(),m(),A.promise(c,{loading:"Loading...",success:"Update success!",error:"Update error!"}),await c,console.info("DATA",o)}catch(t){console.error(t)}});return i.jsx(I,{fullWidth:!0,maxWidth:!1,open:l,onClose:m,PaperProps:{sx:{maxWidth:720}},children:i.jsxs(D,{methods:x,onSubmit:b,children:[i.jsx(ia,{children:"Quick Update"}),i.jsxs(X,{children:[i.jsx(M,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),i.jsxs(f,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[i.jsx(s.Select,{name:"status",label:"Status",children:O.map(o=>i.jsx(Z,{value:o.value,children:o.label},o.value))}),i.jsx(f,{sx:{display:{xs:"none",sm:"block"}}}),i.jsx(s.Text,{name:"name",label:"Full name"}),i.jsx(s.Text,{name:"email",label:"Email address"}),i.jsx(s.Phone,{name:"phoneNumber",label:"Phone number"}),i.jsx(s.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),i.jsx(s.Text,{name:"state",label:"State/region"}),i.jsx(s.Text,{name:"city",label:"City"}),i.jsx(s.Text,{name:"address",label:"Address"}),i.jsx(s.Text,{name:"zipCode",label:"Zip/code"}),i.jsx(s.Text,{name:"company",label:"Company"}),i.jsx(s.Text,{name:"role",label:"Role"})]})]}),i.jsxs(Y,{children:[i.jsx(S,{variant:"outlined",onClick:m,children:"Cancel"}),i.jsx(P,{type:"submit",variant:"contained",loading:p,children:"Update"})]})]})})}export{ia as D,ma as U,ta as a};
